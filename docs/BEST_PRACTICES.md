# AI Agent Team 最佳实践指南

本指南提供使用AI智能体团队系统的最佳实践，帮助您提高开发效率和代码质量。

## 🎯 任务管理最佳实践

### 1. 清晰的任务描述

#### 好的示例 ✅
```bash
# 产品需求分析
/pm "为电商网站设计购物车功能，包括商品添加、数量调整、价格计算、优惠券应用和结算流程"

# 前端开发
/fe "使用React和TypeScript创建响应式购物车组件，支持商品图片、名称、价格、数量控制和删除功能"

# 后端开发
/be "实现RESTful购物车API，包括添加商品、更新数量、删除商品、应用优惠券和获取购物车详情接口"
```

#### 避免的示例 ❌
```bash
# 模糊描述
/pm "设计购物车"
/fe "做个购物车页面"
/be "写购物车接口"
```

### 2. 提供充分上下文

#### 包含项目背景
```bash
/be "基于我们现有的Node.js + Express用户系统，添加OAuth2集成功能，支持Google和GitHub登录，需要与现有的JWT token系统兼容"
```

#### 指定技术栈
```bash
/fe "使用Vue 3 + Composition API + TypeScript创建用户仪表板，集成Element Plus组件库，要求支持响应式设计和暗色主题"
```

### 3. 分步骤复杂任务

#### 大型功能分解
```bash
# 第一步：需求分析
/pm "分析实时协作功能需求，包括文档编辑、用户在线状态、冲突解决和版本管理"

# 第二步：架构设计
/tl "设计实时协作系统架构，包括WebSocket连接管理、操作转换算法和数据同步策略"

# 第三步：后端API
/be "实现WebSocket实时协作服务，支持文档操作同步和用户状态管理"

# 第四步：前端界面
/fe "创建协作编辑界面，支持多用户光标显示和实时文本同步"
```

## 🔄 团队协作最佳实践

### 1. 智能体间工作协调

#### 确保上下文传递
```bash
# 产品经理定义需求
/pm "设计用户认证系统，包括注册、登录、密码重置和邮箱验证功能"

# 前端开发引用需求
/fe "基于产品经理定义的用户认证系统需求，创建登录和注册表单组件，要求与后端API接口格式匹配"

# 后端开发了解前端需求
/be "为前端登录表单提供认证API，包括用户注册、登录验证和token生成功能"

# 测试验证完整集成
/qa "测试前端认证界面与后端API的完整集成，包括成功登录、错误处理和网络异常场景"
```

#### 并行开发策略
```bash
# 需求明确后并行开发
/pm "定义用户管理功能需求，包括CRUD操作和权限管理"

# 同时进行前后端开发
/be "实现用户管理API接口" &
/fe "创建用户管理界面" &
wait

# 集成测试
/qa "测试用户管理功能的完整工作流程"
```

### 2. 代码审查和质量保证

#### 交叉审查
```bash
# 让后端开发审查前端实现
/be "审查前端认证组件的安全性，检查XSS防护和CSRF token实现"

# 让前端开发审查后端设计
/fe "审查后端API的RESTful设计，评估接口的易用性和一致性"

# 技术负责人整体审查
/tl "审查用户认证系统的整体架构设计，评估可扩展性和维护性"
```

#### 安全性检查
```bash
# 专门的安全审查
/qa "进行安全测试，包括SQL注入、XSS、CSRF和权限绕过等安全漏洞检查"

# 性能评估
/ops "评估系统的性能表现，包括API响应时间、数据库查询效率和并发处理能力"
```

## 📊 项目规划最佳实践

### 1. MVP优先策略

#### 最小可行产品定义
```bash
# 第一阶段 - 核心功能
/pm "设计用户认证系统的MVP版本，仅包括邮箱注册、登录和基本的session管理"

# 第二阶段 - 功能增强
/pm "在MVP基础上添加密码重置、邮箱验证和记住登录状态功能"

# 第三阶段 - 高级功能
/pm "添加双因素认证、第三方登录和单点登录功能"
```

#### 迭代式开发
```bash
# 迭代1：基础功能（1-2周）
/be "实现基础的用户注册和登录API"
/fe "创建简单的登录和注册表单"

# 迭代2：功能完善（1周）
/be "添加密码重置和邮箱验证功能"
/fe "完善用户界面，添加错误处理和验证"

# 迭代3：优化提升（1周）
/ops "优化API性能，添加缓存和监控"
/qa "完善测试覆盖率，添加性能测试"
```

### 2. 技术选型最佳实践

#### 让技术负责人评估
```bash
/tl "评估实时聊天系统的技术方案，对比WebSocket、Server-Sent Events和轮询机制的优缺点"
```

#### 考虑团队技能
```bash
/tl "基于团队现有的React和Node.js技能，选择前后端分离架构，避免引入过多的新技术栈"
```

#### 评估可维护性
```bash
/tl "选择TypeScript进行类型安全开发，建立代码规范和自动化检查，提高长期可维护性"
```

## 🛠️ 开发流程最佳实践

### 1. 环境配置

#### 开发环境标准化
```bash
/ops "配置Docker开发环境，确保团队所有成员使用一致的开发环境和依赖版本"

/ops "设置代码格式化和检查工具，包括ESLint、Prettier和pre-commit hooks"
```

#### 测试环境配置
```bash
/ops "配置CI/CD流水线，实现自动化测试、代码检查和部署流程"

/qa "建立测试数据管理策略，确保测试环境的数据一致性和可重复性"
```

### 2. 代码质量保证

#### 测试策略
```bash
# 单元测试
/be "为用户服务编写单元测试，覆盖所有公共方法和边界条件"

# 集成测试
/qa "测试用户注册API与数据库的集成，验证数据完整性和事务处理"

# 端到端测试
/qa "使用Cypress编写端到端测试，模拟完整的用户注册和登录流程"
```

#### 性能优化
```bash
# 前端优化
/fe "实现代码分割和懒加载，优化首屏加载时间，使用React.memo减少不必要的重渲染"

# 后端优化
/be "优化数据库查询，添加适当的索引，实现Redis缓存，确保API响应时间在200ms以内"

# 系统监控
/ops "配置应用性能监控(APM)，实时跟踪响应时间、错误率和资源使用情况"
```

## 🔧 故障排除最佳实践

### 1. 问题定位

#### 系统化排查
```bash
# 1. 检查基础功能
/qa "验证基础API接口是否正常工作，检查HTTP状态码和响应格式"

# 2. 检查数据流
/be "追踪用户请求的完整处理流程，检查各组件的数据传递和处理逻辑"

# 3. 检查集成点
/qa "测试前后端API集成，验证请求格式、响应格式和错误处理机制"
```

#### 错误处理
```bash
# 前端错误处理
/fe "实现全局错误边界和统一的错误提示机制，提供用户友好的错误信息"

# 后端错误处理
/be "建立统一的错误处理中间件，记录详细的错误日志和堆栈信息"

# 监控告警
/ops "配置错误监控和告警系统，及时发现和处理生产环境问题"
```

### 2. 性能问题解决

#### 性能分析
```bash
/ops "使用性能分析工具识别性能瓶颈，包括CPU使用率、内存占用和数据库查询时间"

/be "分析API响应时间，识别慢查询和优化热点代码路径"
```

#### 优化实施
```bash
# 数据库优化
/be "优化数据库查询语句，添加复合索引，考虑读写分离和分库分表策略"

# 缓存策略
/ops "实施多层缓存策略，包括浏览器缓存、CDN缓存和应用缓存，减少服务器负载"

# 前端优化
/fe "优化资源加载，实现图片懒加载和代码分割，减少网络请求数据量"
```

## 📈 团队效率提升

### 1. 自动化工具

#### 开发自动化
```bash
/ops "配置自动化代码检查，包括代码格式、语法检查和安全扫描"

/ops "实现自动化测试执行，在代码提交时自动运行相关测试用例"
```

#### 部署自动化
```bash
/ops "建立自动化部署流程，支持蓝绿部署和回滚机制，确保部署的安全性和可靠性"
```

### 2. 知识管理

#### 文档维护
```bash
/pm "建立API文档规范，使用OpenAPI/Swagger自动生成交互式API文档"

/tl "制定代码注释规范，要求关键业务逻辑和复杂算法添加详细注释"
```

#### 经验分享
```bash
/tl "定期组织技术分享会，推广最佳实践和新技术学习"

/qa "建立缺陷知识库，记录常见问题和解决方案，提高问题解决效率"
```

## 🎯 特定场景最佳实践

### 1. 紧急修复

#### 快速响应流程
```bash
# 1. 问题评估
/tl "评估问题的严重程度和影响范围，确定修复的优先级"

# 2. 快速修复
/be "实施最小化修复，专注于解决核心问题，避免引入新的变更"

# 3. 验证测试
/qa "对修复进行快速验证，确保问题已解决且没有引入新的问题"

# 4. 紧急部署
/ops "执行紧急部署流程，监控系统状态确保修复生效"
```

### 2. 重大功能开发

#### 分阶段实施
```bash
# 阶段1：技术调研
/tl "进行技术调研和原型验证，评估技术方案的可行性"

# 阶段2：架构设计
/tl "设计系统架构，定义模块接口和数据流"

# 阶段3：迭代开发
/be "分模块并行开发，定期进行集成和测试"

# 阶段4：上线部署
/ops "制定上线计划，包括灰度发布和监控方案"
```

### 3. 性能优化项目

#### 性能基准建立
```bash
/qa "建立性能基准测试，记录当前系统的性能指标作为优化目标"

/ops "配置性能监控，实时跟踪系统性能变化趋势"
```

#### 优化实施
```bash
# 优化优先级排序
/tl "基于性能影响和实施难度，对优化项目进行优先级排序"

# 渐进式优化
/be "采用渐进式优化策略，每次优化一个关键瓶颈，验证效果后继续下一步"
```

---

通过遵循这些最佳实践，您可以最大化AI智能体团队系统的价值，提高开发效率，确保代码质量，并建立可持续的开发流程。